// 侧边栏
const sidebar = document.querySelector('.sidebar');
const sidebarToggleButton = document.querySelector('.sidebar-toggle-button');

sidebarToggleButton.addEventListener('click', () => {
  sidebar.classList.toggle('collapsed');
});

// 图片库
const imageGallery = document.querySelector('.image-gallery');

imageGallery.addEventListener('click', (event) => {
  if (event.target.tagName === 'IMG') {
    const modal = document.createElement('div');
    modal.classList.add('modal');

    const modalImage = document.createElement('img');
    modalImage.src = event.target.src;

    const modalCloseButton = document.createElement('button');
    modalCloseButton.classList.add('modal-close-button');
    modalCloseButton.innerHTML = '&times;';

    modal.appendChild(modalImage);
    modal.appendChild(modalCloseButton);

    document.body.appendChild(modal);

    modalCloseButton.addEventListener('click', () => {
      modal.remove();
    });
  }
});

// 表单
const form = document.querySelector('form');

form.addEventListener('submit', (event) => {
  event.preventDefault();

  const formData = new FormData(form);

  fetch('submit.php', {
    method: 'POST',
    body: formData
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      alert('Message sent successfully!');
    } else {
      alert('An error occurred while sending the message. Please try again.');
    }
  })
  .catch(error => {
    console.error('An error occurred while sending the message:', error);
    alert('An error occurred while sending the message. Please try again.');
  });
});
